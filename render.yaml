services:
  # Backend Web Service (Docker)
  - type: web
    name: googleads-dashboard-backend
    runtime: docker
    rootDir: backend
    plan: free
    region: singapore # Closest to user (India) usually
    envVars:
      - key: DATABASE_URL
        fromDatabase:
          name: googleads-db
          property: connectionString
      - key: APP_ENV
        value: production
      - key: DEBUG
        value: "false"
      - key: SECRET_KEY
        generateValue: true
      # You must verify these in the Render Dashboard after creation
      - key: GOOGLE_ADS_REFRESH_TOKEN
        sync: false
      - key: GOOGLE_ADS_CLIENT_ID
        sync: false
      - key: GOOGLE_ADS_CLIENT_SECRET
        sync: false
      - key: GOOGLE_ADS_DEVELOPER_TOKEN
        sync: false
      - key: GOOGLE_ADS_LOGIN_CUSTOMER_ID
        sync: false
      - key: FRONTEND_URL
        value: "https://frontend-mu-lake.vercel.app"

databases:
  # Managed PostgreSQL
  - name: googleads-db
    databaseName: tellspike
    user: tellspike
    plan: free
    region: singapore
# Optional: Redis if we need it for caching later
# - type: redis
#   name: googleads-cache
#   plan: free
